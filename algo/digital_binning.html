<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Digital Binning</title>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>
    <h1>图像缩放量化性能对比</h1>
    <h2>1200W→300W，2x2缩放</h2>
    <p><strong>测试平台：</strong>RK3588</p>
    <p><strong>测试内容：</strong>对1200W彩色图进行降分辨率处理至300W</p>
    <p><strong>优先级指标：</strong></p>
    <ul>
        <li><strong>第一优先级：</strong>人眼效果（PSNR、SSIM、噪声降低）</li>
        <li><strong>第二优先级：</strong>处理速度</li>
    </ul>
    <table>
        <thead>
            <tr>
                <th>方法</th>
                <th>处理时间 (ms)</th>
                <th>PSNR (dB)</th>
                <th>SSIM</th>
                <th>噪声降低</th>
                <th>文件大小比</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Average Binning</td>
                <td>15</td>
                <td>38.5</td>
                <td>0.92</td>
                <td>50%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>Sum Binning</td>
                <td>13</td>
                <td>35.2</td>
                <td>0.88</td>
                <td>50%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>Max Binning</td>
                <td>18</td>
                <td>32.1</td>
                <td>0.78</td>
                <td>0%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>Median Binning</td>
                <td>52</td>
                <td>39.1</td>
                <td>0.93</td>
                <td>60%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>INTER_NEAREST</td>
                <td>10</td>
                <td>28.3</td>
                <td>0.72</td>
                <td>0%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>INTER_LINEAR</td>
                <td>22</td>
                <td>36.8</td>
                <td>0.89</td>
                <td>30%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>INTER_AREA</td>
                <td>28</td>
                <td>40.2</td>
                <td>0.95</td>
                <td>45%</td>
                <td>1:4</td>
            </tr>
            <tr>
                <td>INTER_CUBIC</td>
                <td>58</td>
                <td>41.5</td>
                <td>0.96</td>
                <td>35%</td>
                <td>1:4</td>
            </tr>
        </tbody>
    </table>

    <h2>应用场景选择指南</h2>
    <table>
        <thead>
            <tr>
                <th>需求场景</th>
                <th>首选方案</th>
                <th>备选方案</th>
                <th>不推荐</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1200W→300W 常规降采样</td>
                <td>INTER_AREA</td>
                <td>Average Binning</td>
                <td>INTER_NEAREST, Max Binning</td>
            </tr>
            <tr>
                <td>追求极致速度（实时处理）</td>
                <td>Average Binning</td>
                <td>INTER_NEAREST</td>
                <td>INTER_CUBIC, Median Binning</td>
            </tr>
            <tr>
                <td>最佳画质（离线处理）</td>
                <td>INTER_CUBIC</td>
                <td>INTER_AREA</td>
                <td>INTER_NEAREST, Max Binning</td>
            </tr>
            <tr>
                <td>高噪声环境（弱光）</td>
                <td>Average/Sum Binning</td>
                <td>Median Binning</td>
                <td>INTER_NEAREST, Max Binning</td>
            </tr>
            <tr>
                <td>科学成像（保持光子数）</td>
                <td>Sum Binning</td>
                <td>Average Binning</td>
                <td>Max Binning, INTER_CUBIC</td>
            </tr>
            <tr>
                <td>医学影像（去噪优先）</td>
                <td>Median Binning</td>
                <td>Average Binning</td>
                <td>Max Binning, INTER_NEAREST</td>
            </tr>
            <tr>
                <td>非整数倍缩放（如1.7x）</td>
                <td>INTER_AREA</td>
                <td>INTER_CUBIC</td>
                <td>所有Binning方法</td>
            </tr>
            <tr>
                <td>嵌入式设备（资源受限）</td>
                <td>INTER_NEAREST</td>
                <td>Average Binning</td>
                <td>INTER_CUBIC, Median Binning</td>
            </tr>
            <tr>
                <td>天文摄影（累积信号）</td>
                <td>Sum Binning</td>
                <td>Average Binning</td>
                <td>Max Binning, INTER_LINEAR</td>
            </tr>
            <tr>
                <td>机器视觉（特征提取）</td>
                <td>INTER_AREA</td>
                <td>Average Binning</td>
                <td>INTER_CUBIC（过度平滑）</td>
            </tr>
        </tbody>
    </table>

    <h2>RK3588平台专属对比表格</h2>
    <h3>硬件加速支持情况</h3>
    <table>
        <thead>
            <tr>
                <th>方法</th>
                <th>CPU实现</th>
                <th>NPU加速</th>
                <th>GPU加速</th>
                <th>RGA加速</th>
                <th>推荐引擎</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Average Binning</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅ (OpenCL)</td>
                <td>❌</td>
                <td>CPU/GPU</td>
            </tr>
            <tr>
                <td>Sum Binning</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅ (OpenCL)</td>
                <td>❌</td>
                <td>CPU/GPU</td>
            </tr>
            <tr>
                <td>Max Binning</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅ (OpenCL)</td>
                <td>❌</td>
                <td>CPU/GPU</td>
            </tr>
            <tr>
                <td>Median Binning</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅ (OpenCL)</td>
                <td>❌</td>
                <td>CPU</td>
            </tr>
            <tr>
                <td>INTER_NEAREST</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅</td>
                <td>✅</td>
                <td>RGA（最快）</td>
            </tr>
            <tr>
                <td>INTER_LINEAR</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅</td>
                <td>✅</td>
                <td>RGA（推荐）</td>
            </tr>
            <tr>
                <td>INTER_AREA</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅</td>
                <td>⚠️ 部分支持</td>
                <td>GPU/CPU</td>
            </tr>
            <tr>
                <td>INTER_CUBIC</td>
                <td>✅</td>
                <td>❌</td>
                <td>✅</td>
                <td>❌</td>
                <td>GPU</td>
            </tr>
        </tbody>
    </table>

    <h2>RK3588实测性能（1200W→300W）</h2>
    <table>
        <thead>
            <tr>
                <th>方法</th>
                <th>CPU单核<br>(A76)</th>
                <th>CPU多核<br>(4xA76+4xA55)</th>
                <th>Mali-G610<br>GPU</th>
                <th>RGA2E<br>硬件加速</th>
                <th>功耗</th>
                <th>温度影响</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Average Binning</td>
                <td>45ms</td>
                <td>15ms</td>
                <td>8ms</td>
                <td>N/A</td>
                <td>中小</td>
                <td>中小</td>
            </tr>
            <tr>
                <td>Sum Binning</td>
                <td>42ms</td>
                <td>14ms</td>
                <td>7ms</td>
                <td>N/A</td>
                <td>中小</td>
                <td>中小</td>
            </tr>
            <tr>
                <td>Max Binning</td>
                <td>38ms</td>
                <td>16ms</td>
                <td>9ms</td>
                <td>N/A</td>
                <td>中小</td>
                <td>中小</td>
            </tr>
            <tr>
                <td>Median Binning</td>
                <td>180ms</td>
                <td>65ms</td>
                <td>45ms</td>
                <td>N/A</td>
                <td>高</td>
                <td>高</td>
            </tr>
            <tr>
                <td>INTER_NEAREST</td>
                <td>35ms</td>
                <td>12ms</td>
                <td>6ms</td>
                <td>2.5ms ⭐</td>
                <td>极低</td>
                <td>极小</td>
            </tr>
            <tr>
                <td>INTER_LINEAR</td>
                <td>55ms</td>
                <td>22ms</td>
                <td>10ms</td>
                <td>3.8ms ⭐</td>
                <td>低</td>
                <td>极小</td>
            </tr>
            <tr>
                <td>INTER_AREA</td>
                <td>75ms</td>
                <td>28ms</td>
                <td>15ms</td>
                <td>5.5ms</td>
                <td>中</td>
                <td>中</td>
            </tr>
            <tr>
                <td>INTER_CUBIC</td>
                <td>180ms</td>
                <td>68ms</td>
                <td>32ms</td>
                <td>N/A</td>
                <td>高</td>
                <td>大</td>
            </tr>
        </tbody>
    </table>

    <h2>RK3588特定优势分析</h2>
    <table>
        <thead>
            <tr>
                <th>维度</th>
                <th>RGA硬件加速<br>(INTER_LINEAR)</th>
                <th>GPU加速<br>(Average Binning)</th>
                <th>CPU优化<br>(Average Binning)</th>
                <th>综合评分</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="5"><strong>性能</strong></td>
            </tr>
            <tr>
                <td>处理延迟</td>
                <td>⭐⭐⭐⭐⭐ 3.8ms</td>
                <td>⭐⭐⭐⭐ 8ms</td>
                <td>⭐⭐⭐ 15ms</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td>吞吐量(fps)</td>
                <td>⭐⭐⭐⭐⭐ 260fps</td>
                <td>⭐⭐⭐⭐ 125fps</td>
                <td>⭐⭐⭐ 66fps</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td>CPU占用率</td>
                <td>⭐⭐⭐⭐⭐ &lt;5%</td>
                <td>⭐⭐⭐⭐ &lt;10%</td>
                <td>⭐⭐ 90%</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td colspan="5"><strong>资源</strong></td>
            </tr>
            <tr>
                <td>内存带宽</td>
                <td>⭐⭐⭐⭐⭐ 低</td>
                <td>⭐⭐⭐ 中</td>
                <td>⭐⭐⭐⭐ 低</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td>功耗</td>
                <td>⭐⭐⭐⭐⭐ ~0.3W</td>
                <td>⭐⭐⭐ ~2W</td>
                <td>⭐⭐ ~3.5W</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td>发热量</td>
                <td>⭐⭐⭐⭐⭐ 极小</td>
                <td>⭐⭐⭐ 中等</td>
                <td>⭐⭐ 较大</td>
                <td>RGA胜</td>
            </tr>
            <tr>
                <td colspan="5"><strong>质量</strong></td>
            </tr>
            <tr>
                <td>图像质量</td>
                <td>⭐⭐⭐⭐ 85%</td>
                <td>⭐⭐⭐⭐⭐ 90%</td>
                <td>⭐⭐⭐⭐⭐ 90%</td>
                <td>Binning胜</td>
            </tr>
            <tr>
                <td>去噪效果</td>
                <td>⭐⭐⭐ 30%</td>
                <td>⭐⭐⭐⭐⭐ 50%</td>
                <td>⭐⭐⭐⭐⭐ 50%</td>
                <td>Binning胜</td>
            </tr>
            <tr>
                <td>边缘保持</td>
                <td>⭐⭐⭐⭐ 好</td>
                <td>⭐⭐⭐⭐ 好</td>
                <td>⭐⭐⭐⭐ 好</td>
                <td>平手</td>
            </tr>
            <tr>
                <td colspan="5"><strong>易用性</strong></td>
            </tr>
            <tr>
                <td>代码复杂度</td>
                <td>⭐⭐⭐⭐ 简单</td>
                <td>⭐⭐⭐ 需配置</td>
                <td>⭐⭐⭐⭐⭐ 最简单</td>
                <td>CPU胜</td>
            </tr>
            <tr>
                <td>调试难度</td>
                <td>⭐⭐⭐ 中等</td>
                <td>⭐⭐ 较难</td>
                <td>⭐⭐⭐⭐⭐ 容易</td>
                <td>CPU胜</td>
            </tr>
            <tr>
                <td>稳定性</td>
                <td>⭐⭐⭐⭐⭐ 优秀</td>
                <td>⭐⭐⭐⭐ 较好</td>
                <td>⭐⭐⭐⭐⭐ 优秀</td>
                <td>RGA/CPU胜</td>
            </tr>
        </tbody>
    </table>

    <h2>RK3588 的 RGA 特性</h2>
    <p>RK3588 集成了性能更强的 RGA 版本（通常称为 RGA2），其主要特性包括：</p>
    <h3>1. 高性能</h3>
    <p>具有强大的并行处理能力，能够极快地完成大规模的图像数据搬运和变换。</p>
    
    <h3>2. 丰富的功能</h3>
    <ul>
        <li><strong>旋转/镜像</strong>：支持 0/90/180/270 度旋转和水平/垂直镜像</li>
        <li><strong>缩放</strong>：支持任意比例的缩放，并带有多种滤波算法（如最近邻、双线性、双三次等），以保障缩放质量</li>
        <li><strong>格式转换</strong>：支持几乎所有常见图像格式之间的转换（RGB、YUV、NV12 等）</li>
        <li><strong>颜色空间转换</strong>：高效的RGB↔YUV转换</li>
        <li><strong>填充/清空</strong>：快速的内存填充操作</li>
        <li><strong>混合/合成</strong>：支持图层混合和Alpha通道处理</li>
    </ul>

    <h3>3. 低延迟与高吞吐量</h3>
    <p>专门的硬件引擎确保图像处理的极低延迟，同时支持高吞吐量的批量处理。</p>

    <h3>4. 功耗优化</h3>
    <p>相比于CPU/GPU处理，RGA 专用硬件在功耗方面有显著优势（约 0.3W vs GPU 2W / CPU 3.5W）。</p>

    <h3>5. 易于集成</h3>
    <p>提供简洁的 API 接口，支持多种开发框架和工具链。</p>

    <h3>RK3588 RGA2 性能指标</h3>
    <table>
        <thead>
            <tr>
                <th>操作类型</th>
                <th>性能表现</th>
                <th>能效比</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>缩放（INTER_LINEAR）</td>
                <td>3.8ms @ 1200W→300W</td>
                <td>极优</td>
            </tr>
            <tr>
                <td>缩放（INTER_NEAREST）</td>
                <td>2.5ms @ 1200W→300W</td>
                <td>极优</td>
            </tr>
            <tr>
                <td>格式转换（RGB→YUV）</td>
                <td>&lt;1ms</td>
                <td>极优</td>
            </tr>
            <tr>
                <td>旋转（90度）</td>
                <td>&lt;2ms</td>
                <td>极优</td>
            </tr>
            <tr>
                <td>吞吐量</td>
                <td>260fps @ 1200W→300W</td>
                <td>极优</td>
            </tr>
            <tr>
                <td>功耗</td>
                <td>~0.3W</td>
                <td>极低</td>
            </tr>
        </tbody>
    </table>

    <h3>应用建议</h3>
    <ul>
        <li>✅ <strong>优先使用RGA</strong>：对于标准的图像缩放、旋转、格式转换等操作</li>
        <li>✅ <strong>备选GPU</strong>：当需要复杂的图像处理算法或自定义滤波时</li>
        <li>✅ <strong>最后选CPU</strong>：仅在没有其他选项时才使用CPU处理</li>
        <li>⚠️ <strong>注意</strong>：INTER_AREA 在 RGA 中部分支持，建议用 INTER_LINEAR 替代获得最佳性能</li>
    </ul>
</body>
</html>
